<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>IntStore (pomap.Pomap.Store_impl.IntStore)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">pomap</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Pomap.Store_impl.IntStore</span></h1></header><div class="spec module" id="module-Ix"><a href="#module-Ix" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Ix/index.html">Ix</a> : <a href="../../Store_intf/index.html#module-type-INDEX">Store_intf.INDEX</a></code></div><div class="doc"><p>Index module used to index elements in the store</p></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>+'a t</code><code></code><code></code></div><div class="doc"><p>Type of stores</p></div></div><div class="spec val" id="val-empty"><a href="#val-empty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>The empty store</p></div></div><div class="spec val" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">is_empty s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> <code class="code">true</code> if <code class="code">s</code> is empty, <code class="code">false</code> otherwise.</li></ul></div></div><div class="spec val" id="val-cardinal"><a href="#val-cardinal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cardinal : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code class="code">cardinal s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the number of elements in <code class="code">s</code>.</li></ul></div></div><div class="spec val" id="val-next_ix"><a href="#val-next_ix" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>next_ix : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Ix/index.html#type-t">Ix.t</a></code></div><div class="doc"><p><code class="code">next_ix s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the next index the store <code class="code">s</code> will use to index
a new element.</li></ul></div></div><div class="spec val" id="val-singleton"><a href="#val-singleton" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>singleton : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="Ix/index.html#type-t">Ix.t</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">singleton el</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the tuple <code class="code">(ix, store)</code>, where <code class="code">ix</code>
is the index under which the only element <code class="code">el</code> was stored, and
<code class="code">store</code> is the store containing <code class="code">el</code>.</li></ul></div></div><div class="spec val" id="val-add"><a href="#val-add" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>add : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Ix/index.html#type-t">Ix.t</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">add el s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the tuple <code class="code">(new_ix, new_store)</code>, where <code class="code">new_ix</code>
is the index under which the new element <code class="code">el</code> was stored, and
<code class="code">new_store</code> is the new store containing <code class="code">el</code>.</li></ul></div></div><div class="spec val" id="val-find"><a href="#val-find" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find : <a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">find ix s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the element stored under index <code class="code">ix</code>.</li><li><span class="at-tag raise">Raises</span> <span class="module-path">Not_found</span>: if index <code class="code">ix</code> not bound.</li></ul></div></div><div class="spec val" id="val-update"><a href="#val-update" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>update : <a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">update ix el s</code> rebinds index <code class="code">ix</code> in store <code class="code">s</code> to point to
<code class="code">el</code>, and returns the resulting store. The previous binding
disappears. New indices resulting from further adds are guaranteed
to have higher indices.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Not_found</span>: if index <code class="code">ix</code> not bound.</li></ul></div></div><div class="spec val" id="val-remove"><a href="#val-remove" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>remove : <a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">remove ix s</code> removes the binding of index <code class="code">ix</code> of store <code class="code">s</code>,
and returns the resulting store.</p></div></div><div class="spec val" id="val-iter"><a href="#val-iter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">iter f s</code> applies <code class="code">f</code> to all stored elements in store <code class="code">s</code>. The
order in which elements are passed to <code class="code">f</code> is unspecified.</p></div></div><div class="spec val" id="val-iteri"><a href="#val-iteri" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iteri : (<a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">iter f s</code> applies <code class="code">f</code> to all indexes and their related elements
in store <code class="code">s</code>. The order in which elements are passed to <code class="code">f</code> is
unspecified.</p></div></div><div class="spec val" id="val-map"><a href="#val-map" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>map : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">map f s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a store with all elements in <code class="code">s</code> mapped from
their original value to the codomain of <code class="code">f</code>. Only the elements
are passed to <code class="code">f</code>. The order in which elements are passed to <code class="code">f</code>
is unspecified.</li></ul></div></div><div class="spec val" id="val-mapi"><a href="#val-mapi" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mapi : (<a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">mapi f s</code> same as <code class="code">map</code>, but function <code class="code">f</code> also receives the index
associated with the elements.</p></div></div><div class="spec val" id="val-fold"><a href="#val-fold" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p><code class="code">fold f s a</code> computes <code class="code">(f eN ... (f e1 a) ...)</code>, where <code class="code">e1 ... eN</code>
are the elements of all bindings in store <code class="code">s</code>. The order in which
the bindings are presented to <code class="code">f</code> is unspecified.</p></div></div><div class="spec val" id="val-foldi"><a href="#val-foldi" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>foldi : (<a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p><code class="code">foldi f s a</code> same as <code class="code">fold</code>, but function <code class="code">f</code> also receives
the index associated with the elements.</p></div></div><div class="spec val" id="val-to_list"><a href="#val-to_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_list : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<a href="Ix/index.html#type-t">Ix.t</a><span class="keyword"> * </span><span class="type-var">'a</span>) list</code></div><div class="doc"><p><code class="code">to_list s</code> converts <code class="code">s</code> to an association list of indices and
elements.</p></div></div><div class="spec val" id="val-choose"><a href="#val-choose" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>choose : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Ix/index.html#type-t">Ix.t</a><span class="keyword"> * </span><span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">choose s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a tuple <code class="code">(ix, x)</code>, where <code class="code">ix</code> is the index
of some unspecified value <code class="code">x</code> in store <code class="code">s</code>.</li><li><span class="at-tag raise">Raises</span> <span class="module-path">Not_found</span>: if <code class="code">s</code> is empty.</li></ul></div></div><div class="spec val" id="val-filter"><a href="#val-filter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter : (<a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">filter p s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the store of all elements in <code class="code">s</code> that
satisfy <code class="code">p</code>.</li></ul></div></div><div class="spec val" id="val-partition"><a href="#val-partition" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>partition : (<a href="Ix/index.html#type-t">Ix.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">partition p s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a pair of stores <code class="code">(s1, s2)</code>, where
<code class="code">s1</code> is the store of all the elements of <code class="code">s</code> that satisfy the
predicate <code class="code">p</code>, and <code class="code">s2</code> is the store of all the elements of <code class="code">s</code>
that do not satisfy <code class="code">p</code>.</li></ul></div></div><div class="spec val" id="val-eq_classes"><a href="#val-eq_classes" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>eq_classes : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-t">t</a>) list</code></div><div class="doc"><p><code class="code">eq_classes eq s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a list of tuples <code class="code">(el, ec)</code>, where
<code class="code">el</code> is the only kind of element as identified by the equivalence
relation <code class="code">eq</code> stored in the equivalence class (store) <code class="code">ec</code> under
each index. Every such equivalence class is unique and maximal
with respect to <code class="code">s</code>, and the original indices of the elements are
preserved in each class.</li></ul></div></div><div class="spec val" id="val-get_ix_map"><a href="#val-get_ix_map" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_ix_map : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="Ix/index.html#module-Map">Ix.Map</a>.t</code></div><div class="doc"><p><code class="code">get_ix_map s</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> a map of all indices mapped to their
respective elements in store <code class="code">s</code>.</li></ul></div></div></body></html>